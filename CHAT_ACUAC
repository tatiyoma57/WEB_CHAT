<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Bot de Cuencas Hidrol√≥gicas</title>
    <style>
        body {font-family:Arial,sans-serif; max-width:800px; margin:0 auto; padding:10px;}
        h1 {color:#2196F3; font-size:1.5rem;}
        .topics {background-color:#f0f8ff; padding:10px; border-radius:5px; margin-bottom:10px; font-size:0.9rem;}
        #chatbox {border:1px solid #ddd; height:300px; overflow-y:auto; padding:10px; margin-bottom:10px; background-color:#f9f9f9;}
        .user-message {background-color:#2196F3; color:white; padding:8px; border-radius:5px; margin:5px 0; max-width:80%; margin-left:auto;}
        .bot-message {background-color:#e9e9e9; padding:8px; border-radius:5px; margin:5px 0; max-width:80%;}
        .input-area {display:flex; margin-top:10px; flex-wrap:wrap;}
        #userInput {flex:1; padding:8px; border:1px solid #ddd; border-radius:4px; min-width:200px;}
        button {margin:5px; padding:8px 15px; background-color:#4CAF50; color:white; border:none; border-radius:4px; cursor:pointer;}
        #resetBtn {background-color:#f44336;}
        #muteBtn {background-color:#FF9800;}
        #micBtn {background-color:#9C27B0; opacity:1;}
        #micBtn.listening {
            background-color: #d32f2f;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.6; }
            100% { opacity: 1; }
        }
        
        /* Estilo para el aviso y bot√≥n externo */
        .warning-box {
            background-color: #ff9800;
            color: white;
            padding: 20px;
            border-radius: 5px;
            margin: 15px 0;
            text-align: center;
        }
        
        .external-button {
            display: block;
            width: 80%;
            margin: 20px auto;
            padding: 20px;
            background-color: #2196F3;
            color: white;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            text-decoration: none;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }
        
        .external-button:hover {
            background-color: #0b7dda;
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
            transform: translateY(-2px);
        }
        
        .arrow {
            display: inline-block;
            margin-left: 10px;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <h1>Chat Bot de Cuencas Hidrol√≥gicas</h1>
    
    <div class="warning-box">
        <h2>‚ö†Ô∏è Versi√≥n con micr√≥fono habilitado</h2>
        <p>Esta versi√≥n incluye funcionalidad completa de reconocimiento de voz.
        Haz clic en el bot√≥n del micr√≥fono para hablar con el bot.</p>
    </div>
    
    <!-- REEMPLAZA ESTA URL CON LA UBICACI√ìN REAL DE TU ARCHIVO HTML -->
    <a href="" class="external-button" target="_blank">
        üé§ ABRIR VERSI√ìN COMPLETA CON MICR√ìFONO <span class="arrow">‚Üí</span>
    </a>
    
    <div class="topics"><b>Temas:</b> Cuencas hidrol√≥gicas, Hidrolog√≠a, Erosi√≥n, Climatolog√≠a, Cambio clim√°tico</div>
    <div id="chatbox"></div>
    
    <div class="input-area">
        <input type="text" id="userInput" placeholder="Escribe tu mensaje aqu√≠...">
        <button id="sendBtn">Enviar</button>
        <button id="micBtn">üé§ Micr√≥fono</button>
        <button id="muteBtn">Silenciar</button>
        <button id="resetBtn">Reiniciar</button>
    </div>
    
    <div class="ai-links">
        <p><b>¬øNecesitas informaci√≥n m√°s espec√≠fica?</b> Utiliza estas herramientas de IA gratuitas:</p>
        <a href="https://chat.openai.com/" target="_blank"><button>ChatGPT</button></a>
        <a href="https://bard.google.com/" target="_blank"><button>Google Bard</button></a>
        <a href="https://www.bing.com/new" target="_blank"><button>Bing Chat</button></a>
        <a href="https://huggingface.co/chat/" target="_blank"><button>HuggingChat</button></a>
    </div>

    <script>
        // Variables b√°sicas
        let userName = "";
        let waitingForName = true;
        let isMuted = false;
        let isSearching = false;
        
        // Elementos DOM
        const chatbox = document.getElementById('chatbox');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const resetBtn = document.getElementById('resetBtn');
        const muteBtn = document.getElementById('muteBtn');
        
        // S√≠ntesis de voz
        const speech = window.speechSynthesis;
        
        // Reconocimiento de voz
        let recognition = null;
        try {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            recognition.lang = 'es-ES';
            recognition.continuous = false;
            recognition.interimResults = false;
            
            // Configurar eventos para el reconocimiento de voz
            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript;
                userInput.value = transcript;
                micBtn.classList.remove('listening');
                // Enviar autom√°ticamente el mensaje despu√©s de reconocer la voz
                sendMessage();
            };
            
            recognition.onerror = function(event) {
                console.error('Error en reconocimiento de voz:', event.error);
                micBtn.classList.remove('listening');
            };
            
            recognition.onend = function() {
                micBtn.classList.remove('listening');
                userInput.placeholder = "Escribe tu mensaje aqu√≠...";
            };
            
        } catch(e) {
            console.log('El reconocimiento de voz no est√° disponible en este navegador:', e);
        }
        
        // Base de datos de clima simple (para respuestas offline)
        const climateData = {
            "madrid": {
                temp: "18-25¬∞C",
                condition: "Mayormente soleado",
                humidity: "40-60%",
                rain: "10-15%"
            },
            "barcelona": {
                temp: "20-27¬∞C",
                condition: "Parcialmente nublado",
                humidity: "60-70%",
                rain: "5-10%"
            },
            "m√©xico": {
                temp: "22-28¬∞C",
                condition: "Cielos despejados",
                humidity: "45-55%",
                rain: "5%"
            },
            "bogot√°": {
                temp: "12-18¬∞C",
                condition: "Nublado con lluvias ocasionales",
                humidity: "70-85%",
                rain: "40-50%"
            },
            "buenos aires": {
                temp: "15-22¬∞C",
                condition: "Mayormente despejado",
                humidity: "60%",
                rain: "10%"
            },
            "lima": {
                temp: "17-22¬∞C",
                condition: "Nublado",
                humidity: "75-90%",
                rain: "5%"
            },
            "santiago": {
                temp: "10-22¬∞C",
                condition: "Despejado",
                humidity: "30-50%",
                rain: "5%"
            }
        };
        
        // Base de conocimientos hidrol√≥gicos (versi√≥n reducida para ejemplo)
        const hydrologicalKnowledge = {
            // Cuencas hidrol√≥gicas
            "cuenca": "Una cuenca hidrol√≥gica es un √°rea geogr√°fica donde el agua de lluvia, nieve o deshielo converge en un punto com√∫n, como un r√≠o, lago o el oc√©ano. Es la unidad natural para la gesti√≥n del agua y los recursos naturales.",
            "ciclo hidrol√≥gico": "El ciclo hidrol√≥gico describe el movimiento continuo del agua en, sobre y debajo de la superficie de la Tierra. Incluye procesos de evaporaci√≥n, condensaci√≥n, precipitaci√≥n, infiltraci√≥n, escorrent√≠a y flujo subterr√°neo.",
            "escorrent√≠a": "La escorrent√≠a es el agua de lluvia que fluye sobre la superficie del suelo. Es un componente crucial del ciclo hidrol√≥gico que contribuye al caudal de los r√≠os y puede transportar sedimentos y contaminantes.",
            "infiltraci√≥n": "La infiltraci√≥n es el proceso mediante el cual el agua penetra en el suelo. La tasa de infiltraci√≥n depende de la textura del suelo, su estructura, contenido de humedad previo y compactaci√≥n.",
            "acu√≠fero": "Un acu√≠fero es una formaci√≥n geol√≥gica subterr√°nea que almacena y permite el flujo de agua. Pueden ser libres (con una tabla de agua) o confinados (bajo presi√≥n entre capas impermeables).",
            "modelaci√≥n hidrol√≥gica": "La modelaci√≥n hidrol√≥gica es el proceso de representar matem√°ticamente el comportamiento del agua en una cuenca. Los modelos pueden ser conceptuales, f√≠sicos o de caja negra, y se utilizan para predecir caudales, inundaciones o calidad del agua.",
            "erosi√≥n h√≠drica": "La erosi√≥n h√≠drica es el proceso de degradaci√≥n del suelo causado por el agua. Incluye erosi√≥n por salpicadura, laminar, en surcos y c√°rcavas, y afecta la productividad del suelo y calidad del agua.",
            "cambio clim√°tico": "El cambio clim√°tico est√° alterando los patrones hidrol√≥gicos globales, modificando la intensidad y frecuencia de precipitaciones, aumentando eventos extremos y afectando la disponibilidad de agua en muchas regiones."
        };
        
        // Funci√≥n para texto a voz
        function speakText(text) {
            if (isMuted || !speech) return;
            
            try {
                speech.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'es-ES';
                utterance.rate = 1.0;
                speech.speak(utterance);
            } catch (e) {
                console.log('Error en s√≠ntesis de voz:', e);
            }
        }
        
        // Agregar mensaje al chat
        function addMessage(text, isBot = false) {
            const msgDiv = document.createElement('div');
            msgDiv.classList.add(isBot ? 'bot-message' : 'user-message');
            msgDiv.textContent = text;
            chatbox.appendChild(msgDiv);
            chatbox.scrollTop = chatbox.scrollHeight;
            
            if (isBot) {
                speakText(text);
            }
        }
        
        // Obtener informaci√≥n del clima de nuestra base de datos local
        function getWeatherInformation(location) {
            const normalizedLocation = location.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
            
            // Verificar si tenemos datos para esta ubicaci√≥n
            for (const [city, data] of Object.entries(climateData)) {
                if (normalizedLocation.includes(city) || city.includes(normalizedLocation)) {
                    const now = new Date();
                    const day = now.toLocaleDateString('es-ES', { weekday: 'long', day: 'numeric', month: 'long' });
                    
                    return `El clima para ${city.charAt(0).toUpperCase() + city.slice(1)} hoy ${day}: 
                            Temperatura: ${data.temp}. 
                            Condici√≥n: ${data.condition}. 
                            Humedad: ${data.humidity}. 
                            Probabilidad de lluvia: ${data.rain}.`;
                }
            }
            
            // Generamos una respuesta simulada si no tenemos datos espec√≠ficos
            return generateSimulatedWeather(location);
        }
        
        // Generar pron√≥stico simulado para cualquier ciudad
        function generateSimulatedWeather(location) {
            // Datos clim√°ticos aleatorios pero realistas basados en la √©poca del a√±o
            const now = new Date();
            const month = now.getMonth(); // 0-11 (enero-diciembre)
            let randomTemp, randomCondition, randomHumidity, randomRain;
            
            // Ajustamos seg√∫n hemisferio y estaci√≥n
            // Simplificaci√≥n: asumimos hemisferio norte para generar temperaturas realistas
            if (month >= 11 || month <= 1) { 
                // Invierno en el norte
                randomTemp = `${Math.floor(Math.random() * 10) - 5}-${Math.floor(Math.random() * 15)}¬∞C`;
                randomCondition = ["Nublado", "Parcialmente nublado", "Nevadas ligeras", "Fr√≠o", "Lluvia fr√≠a"][Math.floor(Math.random() * 5)];
                randomHumidity = `${Math.floor(Math.random() * 20) + 60}%`;
                randomRain = `${Math.floor(Math.random() * 40) + 20}%`;
            } else if (month >= 2 && month <= 4) { 
                // Primavera en el norte
                randomTemp = `${Math.floor(Math.random() * 10) + 5}-${Math.floor(Math.random() * 15) + 15}¬∞C`;
                randomCondition = ["Parcialmente nublado", "Despejado con nubes ocasionales", "Lluvias ligeras", "Vientos frescos"][Math.floor(Math.random() * 4)];
                randomHumidity = `${Math.floor(Math.random() * 20) + 50}%`;
                randomRain = `${Math.floor(Math.random() * 30) + 10}%`;
            } else if (month >= 5 && month <= 7) { 
                // Verano en el norte
                randomTemp = `${Math.floor(Math.random() * 10) + 15}-${Math.floor(Math.random() * 15) + 25}¬∞C`;
                randomCondition = ["Soleado", "Despejado", "Cielos claros", "Parcialmente nublado", "Caluroso"][Math.floor(Math.random() * 5)];
                randomHumidity = `${Math.floor(Math.random() * 30) + 40}%`;
                randomRain = `${Math.floor(Math.random() * 15) + 5}%`;
            } else { 
                // Oto√±o en el norte
                randomTemp = `${Math.floor(Math.random() * 10) + 10}-${Math.floor(Math.random() * 15) + 15}¬∞C`;
                randomCondition = ["Nublado", "Parcialmente nublado", "Lluvia ocasional", "Viento fresco"][Math.floor(Math.random() * 4)];
                randomHumidity = `${Math.floor(Math.random() * 20) + 55}%`;
                randomRain = `${Math.floor(Math.random() * 30) + 10}%`;
            }
            
            const day = now.toLocaleDateString('es-ES', { weekday: 'long', day: 'numeric', month: 'long' });
            
            return `El clima aproximado para ${location} hoy ${day}: 
                    Temperatura: ${randomTemp}. 
                    Condici√≥n: ${randomCondition}. 
                    Humedad: ${randomHumidity}. 
                    Probabilidad de lluvia: ${randomRain}.`;
        }
        
        // Generar pron√≥stico a futuro simulado
        function generateForecastWeather(location) {
            const now = new Date();
            let forecastText = `Pron√≥stico para ${location} en los pr√≥ximos d√≠as:\n\n`;
            
            // Generar un pron√≥stico para los pr√≥ximos 5 d√≠as
            for (let i = 1; i <= 5; i++) {
                const forecastDate = new Date();
                forecastDate.setDate(now.getDate() + i);
                const dayName = forecastDate.toLocaleDateString('es-ES', { weekday: 'long', day: 'numeric' });
                
                const minTemp = Math.floor(Math.random() * 15) + 5;
                const maxTemp = minTemp + Math.floor(Math.random() * 10) + 5;
                
                const conditions = ["Soleado", "Parcialmente nublado", "Nublado", "Lluvioso", "Tormentoso", "Despejado"];
                const condition = conditions[Math.floor(Math.random() * conditions.length)];
                
                forecastText += `${dayName}: ${condition}. Temperatura: ${minTemp}¬∞C a ${maxTemp}¬∞C.\n`;
            }
            
            return forecastText;
        }
        
        // Funci√≥n mejorada para detectar consultas de clima
        function isWeatherQuery(text) {
            const weatherKeywords = [
                'clima', 'tiempo', 'temperatura', 'lluvia', 'llover', 'pronostico', 
                'pron√≥stico', 'meteorolog√≠a', 'meteorol√≥gico', 'sol', 'calor', 
                'fr√≠o', 'frio', 'nublado', 'precipitaci√≥n', 'meteo', 'viento'
            ];
            
            const lowerText = text.toLowerCase();
            
            // Verificar si contiene palabras clave de clima
            for (const keyword of weatherKeywords) {
                if (lowerText.includes(keyword)) {
                    return true;
                }
            }
            
            return false;
        }
        
        // Funci√≥n mejorada para extraer la ubicaci√≥n
        function extractLocation(text) {
            const lowerText = text.toLowerCase();
            
            // Si es una consulta de clima, intentamos extraer la ubicaci√≥n
            if (isWeatherQuery(text)) {
                // Patrones comunes para consultas de clima
                const patterns = [
                    /clima (?:en|de) ([\w√°√©√≠√≥√∫√º√±\s]+)/i,                  // "clima en Madrid"
                    /tiempo (?:en|de) ([\w√°√©√≠√≥√∫√º√±\s]+)/i,                 // "tiempo en Barcelona"
                    /pron√≥stico (?:de|para|en) ([\w√°√©√≠√≥√∫√º√±\s]+)/i,        // "pron√≥stico para Valencia"
                    /pronostico (?:de|para|en) ([\w√°√©√≠√≥√∫√º√±\s]+)/i,        // sin acento
                    /(?:c√≥mo|como) (?:est√°|estar√°|es|sera) el clima (?:en|de) ([\w√°√©√≠√≥√∫√º√±\s]+)/i,  // "¬øc√≥mo est√° el clima en Sevilla?"
                    /(?:va a|va|habr√°|hay|har√°) (?:llover|lluvia|sol|calor|fr√≠o|frio) (?:en|hoy en) ([\w√°√©√≠√≥√∫√º√±\s]+)/i,  // "va a llover en Bogot√°"
                    /temperatura (?:en|de) ([\w√°√©√≠√≥√∫√º√±\s]+)/i,           // "temperatura en Lima"
                    /clima (?:para|de) ([\w√°√©√≠√≥√∫√º√±\s]+)/i,               // "clima para Montevideo"
                    /(?:el|la) (?:clima|tiempo|temperatura) (?:en|de) ([\w√°√©√≠√≥√∫√º√±\s]+)/i, // "el clima en Buenos Aires"
                    /(?:qu√©|que) (?:clima|tiempo) (?:hace|hay) (?:en|hoy en) ([\w√°√©√≠√≥√∫√º√±\s]+)/i // "qu√© clima hay en Quito"
                ];
                
                for (const pattern of patterns) {
                    const match = text.match(pattern);
                    if (match && match[1]) {
                        // Limpiar el nombre de la ubicaci√≥n
                        return match[1].trim().replace(/[?.,;!]/g, '');
                    }
                }
                
                // Si no encontramos una ubicaci√≥n con los patrones pero es una consulta de clima
                // buscamos la √∫ltima palabra que podr√≠a ser el nombre de una ciudad
                const words = lowerText.replace(/[?.,;!]/g, '').split(' ');
                if (words.length > 0) {
                    // Evitar palabras comunes que no son nombres de ciudades
                    const commonWords = ['clima', 'tiempo', 'el', 'la', 'en', 'de', 'pronostico', 'pron√≥stico', 
                                       'temperatura', 'hace', 'hay', 'va', 'para', 'hoy', 'ma√±ana', 
                                       'lluvia', 'llover', 'sol', 'calor', 'frio', 'fr√≠o'];
                    
                    // Buscar la √∫ltima palabra que no sea com√∫n
                    for (let i = words.length - 1; i >= 0; i--) {
                        if (!commonWords.includes(words[i]) && words[i].length > 3) {
                            return words[i].charAt(0).toUpperCase() + words[i].slice(1);
                        }
                    }
                }
            }
            
            return null;
        }
        
        // Buscar informaci√≥n en Wikipedia
        async function searchWikipedia(query) {
            try {
                const searchUrl = `https://es.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(query)}+hidrolog√≠a+cuenca+agua&format=json&origin=*&utf8=`;
                const searchResponse = await fetch(searchUrl);
                const searchData = await searchResponse.json();
                
                if (searchData.query.search.length === 0) {
                    return null;
                }
                
                const pageId = searchData.query.search[0].pageid;
                const contentUrl = `https://es.wikipedia.org/w/api.php?action=query&prop=extracts&exintro=1&explaintext=1&pageids=${pageId}&format=json&origin=*&utf8=`;
                
                const contentResponse = await fetch(contentUrl);
                const contentData = await contentResponse.json();
                
                const pageContent = contentData.query.pages[pageId].extract;
                
                // Procesar el contenido para hacerlo m√°s conciso
                let processedContent = pageContent;
                if (processedContent.length > 500) {
                    processedContent = processedContent.substring(0, 500).trim();
                    // Asegurar que termina en una oraci√≥n completa
                    const lastDot = processedContent.lastIndexOf('.');
                    if (lastDot > 400) {
                        processedContent = processedContent.substring(0, lastDot + 1);
                    } else {
                        processedContent += "...";
                    }
                }
                
                return {
                    title: searchData.query.search[0].title,
                    content: processedContent,
                    pageId: pageId
                };
                
            } catch (error) {
                console.error("Error searching Wikipedia:", error);
                return null;
            }
        }
        
        // Procesar el mensaje del usuario y generar respuesta
        async function processMessage(text) {
            if (!text.trim()) return;
            
            // Si estamos esperando el nombre del usuario
            if (waitingForName) {
                userName = text.trim();
                waitingForName = false;
                addMessage(`¬°Hola ${userName}! Soy el asistente virtual especializado en cuencas hidrol√≥gicas. Puedes preguntarme sobre temas como ciclo hidrol√≥gico, erosi√≥n, tipos de cuencas o incluso consultar el clima de cualquier lugar. ¬øEn qu√© puedo ayudarte hoy?`, true);
                return;
            }
            
            // Convertir texto a min√∫sculas para comparaciones
            const lowerText = text.toLowerCase();
            
            // Verificar si es una consulta de clima
            if (isWeatherQuery(lowerText)) {
                const location = extractLocation(text);
                if (location) {
                    // Determinar si es pron√≥stico a futuro o clima actual
                    if (lowerText.includes("pron√≥stico") || lowerText.includes("pronostico") || 
                        lowerText.includes("pr√≥ximos d√≠as") || lowerText.includes("proximos dias") || 
                        lowerText.includes("semana") || lowerText.includes("ma√±ana")) {
                        const forecast = generateForecastWeather(location);
                        addMessage(forecast, true);
                    } else {
                        const weatherInfo = getWeatherInformation(location);
                        addMessage(weatherInfo, true);
                    }
                    return;
                }
            }
            
            // Buscar en la base de conocimiento hidrol√≥gico
            for (const [keyword, info] of Object.entries(hydrologicalKnowledge)) {
                if (lowerText.includes(keyword)) {
                    addMessage(info, true);
                    return;
                }
            }
            
            // Si no encontramos una respuesta espec√≠fica, buscar en Wikipedia
            addMessage("Buscando informaci√≥n relevante...", true);
            isSearching = true;
            
            const wikiResult = await searchWikipedia(text);
            
            if (wikiResult) {
                const message = `Informaci√≥n sobre "${wikiResult.title}":\n\n${wikiResult.content}\n\nPuedes consultar m√°s informaci√≥n en Wikipedia.`;
                addMessage(message, true);
            } else {
                addMessage("Lo siento, no encontr√© informaci√≥n espec√≠fica sobre tu consulta. ¬øPuedes reformularla o preguntar sobre otro tema relacionado con hidrolog√≠a o cuencas?", true);
            }
            
            isSearching = false;
        }
        
        // Funci√≥n para enviar mensaje
        function sendMessage() {
            const message = userInput.value.trim();
            if (message) {
                addMessage(message, false);
                processMessage(message);
                userInput.value = '';
            }
        }
        
        // Evento para bot√≥n de enviar
        sendBtn.addEventListener('click', sendMessage);
        
        // Evento para enviar con Enter
        userInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        
        // Evento para bot√≥n de reiniciar
        resetBtn.addEventListener('click', function() {
            chatbox.innerHTML = '';
            waitingForName = true;
            addMessage("¬°Hola! Soy el asistente virtual de cuencas hidrol√≥gicas. ¬øCu√°l es tu nombre?", true);
        });
        
        // Evento para bot√≥n de silenciar
        muteBtn.addEventListener('click', function() {
            isMuted = !isMuted;
            this.textContent = isMuted ? "Activar voz" : "Silenciar";
            if (isMuted) {
                speech.cancel();
            }
        });
        
        // Evento para bot√≥n del micr√≥fono
        document.getElementById('micBtn').addEventListener('click', function() {
            if (!recognition) {
                alert('Lo sentimos, el reconocimiento de voz no es compatible con este navegador.');
                return;
            }
            
            try {
                if (this.classList.contains('listening')) {
                    recognition.stop();
                    this.classList.remove('listening');
                    userInput.placeholder = "Escribe tu mensaje aqu√≠...";
                } else {
                    recognition.start();
                    this.classList.add('listening');
                    userInput.placeholder = "Escuchando...";
                }
            } catch(e) {
                console.error('Error al activar el micr√≥fono:', e);
            }
        });
        
        // Iniciar el chat
        window.onload = function() {
            addMessage("¬°Hola! Soy el asistente virtual de cuencas hidrol√≥gicas. ¬øCu√°l es tu nombre?", true);
        };
    </script>
</body>
</html>
